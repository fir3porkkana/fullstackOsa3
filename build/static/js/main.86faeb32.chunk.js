(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(39)},18:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),l=t(11),r=t.n(l),u=(t(18),t(3)),c=t(2),i=t.n(c),s="/api/persons",m=function(e){return i.a.post(s,e)},f=function(){return i.a.get(s).then(function(e){return e.data})},g=function(e){return console.log(e),i.a.delete("".concat(s,"/").concat(e.id))},v=function(e){var n=e.replacement,t=e.id;return console.log("tunnistettavaa putissa",t),console.log(n),i.a.put("".concat(s,"/").concat(t),n)},d=function(e){return console.log(),a.a.createElement("div",null,"rajaa tuloksia: ",a.a.createElement("input",{value:e.filter,onChange:e.onChange}))},p=function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"error"},n)},h=function(e){var n=e.person,t=e.persons,o=e.setPersons,l=e.setErrorMessage;return console.log("person sanoo",n),a.a.createElement(a.a.Fragment,null,n.name," ",n.number,a.a.createElement("button",{onClick:function(){return E(n,t,o,l)}},"poista"," "))},E=function(e,n,t,o){var a=window.confirm("poistetaanko ".concat(e.name)),l=e.id;a&&(g(e).then(function(n){o("henkil\xf6 ".concat(e.name," poistettu")),setTimeout(function(){o(null)},5e3)}),f().then(function(e){console.log("result",e),t(e),t(n.filter(function(e){return e.id!==l}))}))},b=function(e){var n=e.persons,t=e.personsToShow,o=e.setPersons,l=e.setErrorMessage;return console.log(t),a.a.createElement("ul",null,t.map(function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(h,{person:e,persons:n,setPersons:o,setErrorMessage:l}))}))},w=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],l=n[1],r=Object(o.useState)(""),c=Object(u.a)(r,2),s=c[0],g=c[1],h=Object(o.useState)(""),E=Object(u.a)(h,2),w=E[0],j=E[1],k=Object(o.useState)(!0),O=Object(u.a)(k,2),S=O[0],C=O[1],T=Object(o.useState)(""),y=Object(u.a)(T,2),P=y[0],M=y[1],B=Object(o.useState)(""),J=Object(u.a)(B,2),N=J[0],W=J[1];Object(o.useEffect)(function(){console.log("effect"),i.a.get("/api/persons").then(function(e){console.log("promise fulfilled"),l(e.data)})},[]);var x=S?t:t.filter(function(e){return e.name.includes(P)});return a.a.createElement("div",null,a.a.createElement("h2",null,"Puhelinluettelo"),a.a.createElement("div",null,a.a.createElement(p,{message:N})),a.a.createElement("div",null,a.a.createElement(d,{filter:P,onChange:function(e){console.log(e.target.value),M(e.target.value),""!==e.target.value?C(!1):C(!0)}})),a.a.createElement("h3",null,"lis\xe4\xe4 uusi"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("prevent default",e.target.value);var n={name:s,number:w};if(console.log(n),console.log(t.includes(n)),t.map(function(e){return e.name}).includes(s)){if(window.confirm("".concat(s," on jo luettelossa. Korvataanko vanha numero uudella?"))){var o=t.find(function(e){return e.name===s}).id;console.log("tunnistettavaa ",o),v({replacement:n,id:o}).then(function(){return f().then(function(e){console.log("result",e),l(e)}).catch(function(e){W("henkil\xf6 '".concat(s,"' oli jo poistettu")),setTimeout(function(){W(null)},5e3)})}),W("henkil\xf6n '".concat(s,"' numero muutettu")),setTimeout(function(){W(null)},5e3)}}else m(n).then(function(e){return f().then(function(e){console.log("result",e),l(e),W("henkil\xf6 '".concat(s,"' lis\xe4tty")),setTimeout(function(){W(null)},5e3)})}).catch(function(e){console.log("vilduils"),W(e.response.data)});g(""),j("")}},a.a.createElement("div",null,"nimi: ",a.a.createElement("input",{value:s,onChange:function(e){console.log(e.target.value),g(e.target.value)}})),a.a.createElement("div",null,"numero: ",a.a.createElement("input",{value:w,onChange:function(e){console.log(e.target.value),j(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),a.a.createElement("h2",null,"Numerot"),a.a.createElement("div",null,a.a.createElement(b,{persons:t,personsToShow:x,setPersons:l,setErrorMessage:W})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.86faeb32.chunk.js.map